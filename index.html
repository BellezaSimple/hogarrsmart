<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>HogarSmart — Soluciones prácticas para tu hogar</title>

  <!-- Font -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">

  <style>
    /* -----------------------------------------
       Paleta: grises / negro / blanco + amarillo
    ------------------------------------------*/
    :root{
      --bg:#fafafa;
      --surface:#ffffff;
      --muted-1:#f2f2f2;
      --muted-2:#e6e6e6;
      --text:#222;
      --muted-text:#6b6b6b;
      --accent:#f6c85f; /* amarillo */
      --accent-dark:#e4b84b;
      --shadow: rgba(16,24,32,0.06);
      --max-width:1200px;
      --radius:14px;
      --glass: rgba(255,255,255,0.6);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:'Poppins',sans-serif;
      background:linear-gradient(180deg,var(--bg) 0%, #ffffff 100%);
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      line-height:1.45;
    }
    a{color:inherit;text-decoration:none}
    img{max-width:100%;display:block}

    /* ---------- Header ---------- */
    header{
      position:fixed;top:0;left:0;right:0;height:68px;
      display:flex;align-items:center;justify-content:space-between;padding:0 18px;
      background:rgba(255,255,255,0.8);backdrop-filter: blur(6px);
      border-bottom:1px solid var(--muted-2);z-index:1500;
    }
    .brand{display:flex;align-items:center;gap:12px}
    .logo{
      width:48px;height:48px;border-radius:10px;
      background:linear-gradient(180deg,#fff,#f4f4f4);
      border:1px solid var(--muted-2);display:flex;align-items:center;justify-content:center;font-weight:800;color:var(--text);
      box-shadow:0 8px 18px rgba(0,0,0,0.04);
      font-size:14px
    }
    .brand .title{font-weight:700;font-size:1rem;color:#111}
    nav.desktop{display:none}

    /* hamburger (panel) */
    .hamburger{width:48px;height:48px;border-radius:12px;display:flex;align-items:center;justify-content:center;background:transparent;border:none;cursor:pointer}
    .burger-lines{width:22px;height:2px;background:#222;border-radius:2px;position:relative}
    .burger-lines::before,.burger-lines::after{content:"";position:absolute;left:0;width:22px;height:2px;background:#222;border-radius:2px}
    .burger-lines::before{top:-7px}.burger-lines::after{top:7px}
    .hamburger.open .burger-lines{background:transparent}
    .hamburger.open .burger-lines::before{transform:translateY(7px) rotate(45deg)}
    .hamburger.open .burger-lines::after{transform:translateY(-7px) rotate(-45deg)}

    main{padding-top:92px}
    .container{max-width:var(--max-width);margin:0 auto;padding:0 18px}

    /* ---------- HERO / INICIO ---------- */
    #inicio{padding:46px 0 32px}
    .hero{
      display:grid;grid-template-columns:1fr;gap:18px;align-items:center;
    }
    .hero-card{
      background:linear-gradient(180deg, rgba(255,255,255,0.95), rgba(250,250,250,0.95));
      padding:26px;border-radius:16px;box-shadow:0 12px 40px rgba(16,24,32,0.06);
      display:flex;gap:22px;align-items:center;justify-content:space-between;
    }
    .hero-left{max-width:62%}
    .hero-left h1{font-size:1.6rem;margin:0 0 8px;color:#111}
    .hero-left p{margin:0;color:var(--muted-text)}
    .hero-cta{margin-top:12px;display:flex;gap:12px;flex-wrap:wrap}
    .btn{padding:10px 16px;border-radius:999px;border:none;cursor:pointer;font-weight:700}
    .btn-primary{background:var(--text);color:#fff}
    .btn-ghost{background:transparent;border:1px solid rgba(0,0,0,0.06);color:var(--text)}

    /* side area in hero for top products */
    .hero-right{width:320px;background:linear-gradient(180deg,var(--surface),#fbfbfb);padding:16px;border-radius:12px;border:1px solid var(--muted-2)}
    .hero-right h3{margin:0 0 8px;font-size:1rem;color:#222}
    .top-list{display:grid;gap:10px}
    .top-item{display:flex;gap:12px;align-items:center;cursor:pointer;padding:8px;border-radius:10px;transition:all .12s}
    .top-item:hover{background:var(--muted-1);transform:translateX(-4px)}
    .top-item img{width:72px;height:56px;border-radius:8px;object-fit:cover}

    /* ---------- PRODUCTS GRID / CATALOG ---------- */
    #productos{padding:28px 0}
    .section-head{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:10px}
    .section-title{font-size:1.15rem;color:#111;font-weight:700}
    .section-sub{color:var(--muted-text);font-size:0.95rem}

    .products-grid{
      display:grid;
      grid-template-columns:repeat(4,1fr);
      gap:14px;
    }
    .product-card{
      background:var(--surface);border-radius:12px;padding:12px;box-shadow:0 8px 18px var(--shadow);
      display:flex;flex-direction:column;gap:8px;transition:transform .18s,box-shadow .18s;cursor:pointer;
    }
    .product-card:hover{transform:translateY(-6px);box-shadow:0 20px 36px rgba(0,0,0,0.08)}
    .product-thumb{height:180px;border-radius:10px;overflow:hidden;background:var(--muted-1);display:flex;align-items:center;justify-content:center}
    .product-meta{display:flex;flex-direction:column;gap:6px}
    .product-title{font-weight:700;color:#111;font-size:0.98rem;margin:0}
    .product-desc{color:var(--muted-text);font-size:0.92rem;margin:0}
    .product-row{display:flex;justify-content:space-between;align-items:center;margin-top:auto}

    .price{font-weight:800;color:#111}

    .old-price{font-weight:700;color:var(--muted-text);text-decoration:line-through;font-size:0.9rem;margin-right:8px;color:#b94a48}

    .offer-badge{background:linear-gradient(90deg,#ffcf6a,#f6bf2a);padding:6px 8px;border-radius:8px;font-weight:800;color:#3a2b00;font-size:12px}

    /* ---------- PRODUCT MODAL (center) ---------- */
    .overlay-modal{
      position:fixed;inset:0;background:rgba(0,0,0,0.28);backdrop-filter:blur(4px);opacity:0;visibility:hidden;transition:opacity .22s,z-index 0s;z-index:1400;
    }
    .overlay-modal.show{opacity:1;visibility:visible}
    .product-modal{
      position:fixed;left:50%;top:50%;transform:translate(-50%,-50%) scale(.98);
      width:90%;max-width:980px;height:auto;max-height:86vh;overflow:auto;
      background:linear-gradient(180deg,var(--surface),#fff);border-radius:14px;padding:16px;
      box-shadow:0 30px 90px rgba(0,0,0,0.28);z-index:1450;opacity:0;visibility:hidden;transition:opacity .2s,transform .2s;
    }
    .product-modal.show{opacity:1;visibility:visible;transform:translate(-50%,-50%) scale(1)}
    .modal-grid{display:grid;grid-template-columns:1fr 360px;gap:16px}
    .modal-left img{width:100%;height:320px;object-fit:contain;border-radius:10px;background:var(--muted-1)}
    .thumbs{display:flex;gap:8px;margin-top:8px}
    .thumbs img{width:72px;height:72px;border-radius:8px;object-fit:cover;cursor:pointer;border:1px solid var(--muted-2)}
    .modal-right{display:flex;flex-direction:column;gap:10px;padding:6px}
    .promo{background:linear-gradient(90deg,var(--accent),var(--accent-dark));padding:8px;border-radius:8px;color:#3a2b00;font-weight:700}

    /* mini order form */
    .mini-form{display:flex;flex-direction:column;gap:8px;margin-top:8px}
    .mini-form input,.mini-form textarea,.mini-form select{padding:10px;border-radius:10px;border:1px solid #eee}
    .pay-options{display:flex;gap:8px;flex-wrap:wrap}
    .pay-options label{background:var(--muted-1);padding:6px 8px;border-radius:8px;font-weight:600}

    .pm-msg{display:none;margin-top:8px;font-weight:700;color:green}

    /* rating area */
    .rating-area{display:flex;flex-direction:column;gap:8px}
    .stars-inline{display:flex;gap:6px;font-size:20px;color:#f5c518}
    .rating-badge{font-weight:700;color:var(--text);margin-left:8px}

    /* thank you toast */
    .toast{
      position:fixed;left:50%;transform:translateX(-50%);bottom:28px;background:#111;color:#fff;padding:12px 18px;border-radius:999px;box-shadow:0 6px 18px rgba(0,0,0,0.2);opacity:0;visibility:hidden;transition:opacity .25s;
      z-index:1600;
    }
    .toast.show{opacity:1;visibility:visible}

    /* ---------- SIDE PANEL (BURGER MENU) ---------- */
    .side-panel{
      position:fixed;top:0;right:-100%;width:92%;max-width:720px;height:100vh;background:linear-gradient(180deg,#fff,#fbfbfb);
      box-shadow:-40px 0 80px rgba(0,0,0,0.12);border-left:1px solid var(--muted-2);z-index:1550;padding:28px 22px;transition:right .28s cubic-bezier(.2,.9,.2,1);
    }
    .side-panel.show{right:0}
    .panel-inner{display:flex;flex-direction:column;height:100%}
    .panel-header{display:flex;align-items:center;justify-content:space-between;gap:12px}
    .panel-links{display:flex;flex-direction:column;gap:10px;margin-top:18px}
    .panel-links a{padding:12px 16px;border-radius:12px;text-decoration:none;color:#111;display:flex;align-items:center;gap:10px;font-weight:700;background:transparent;border:1px solid rgba(0,0,0,0.04)}
    .panel-links a:hover{background:var(--muted-1);transform:translateX(-6px);transition:all .12s}

    /* blur when side-panel open - apply via JS to main content wrapper */
    .blurred{filter:blur(4px);pointer-events:none;user-select:none}

    /* ---------- COMMENTS / REVIEWS LIST ---------- */
    #comentarios{padding:18px 0}
    .review{background:var(--surface);padding:12px;border-radius:10px;border:1px solid var(--muted-2);display:flex;gap:12px;align-items:flex-start}
    .avatar{width:44px;height:44px;border-radius:10px;background:var(--muted-1);display:flex;align-items:center;justify-content:center;font-weight:700;color:var(--text)}

    /* ---------- FOOTER ---------- */
    footer{background:var(--muted-2);padding:28px 18px;margin-top:24px}
    .foot-inner{max-width:var(--max-width);margin:0 auto;display:flex;flex-direction:column;align-items:center;gap:12px}
    footer a{color:var(--text);font-weight:700}

    /* ---------- CONTACT PAGE (full-screen interface) ---------- */
    .contact-page{
      position:fixed;inset:0;background:linear-gradient(180deg,var(--surface),#fff);
      z-index:1700;visibility:hidden;opacity:0;transform:translateY(6px);transition:opacity .22s, transform .22s, visibility 0s .22s;
      display:flex;flex-direction:column;align-items:center;padding-top:80px;overflow:auto;
    }
    .contact-page.show{visibility:visible;opacity:1;transform:none;transition-delay:0s;pointer-events:auto}
    .contact-inner{max-width:1100px;width:100%;padding:22px}
    .contact-header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:18px}
    .contact-card{background:var(--surface);padding:18px;border-radius:12px;box-shadow:0 18px 40px rgba(0,0,0,0.06);display:grid;grid-template-columns:1fr 420px;gap:16px}
    .contact-left p{color:var(--muted-text)}
    .map-frame{width:100%;height:320px;border-radius:10px;border:1px solid var(--muted-2);overflow:hidden}
    .contact-form input,.contact-form textarea,.contact-form select{width:100%;padding:10px;border-radius:8px;border:1px solid #eee}
    .contact-actions{display:flex;gap:10px;align-items:center;margin-top:10px}
    .contact-back{background:transparent;border:1px solid rgba(0,0,0,0.06);padding:8px 12px;border-radius:8px;cursor:pointer}

    /* responsive for contact */
    @media (max-width:1020px){
      .contact-card{grid-template-columns:1fr}
    }

    /* ---------- Responsive ---------- */
    @media (max-width:1020px){
      .products-grid{grid-template-columns:repeat(3,1fr)}
      .modal-grid{grid-template-columns:1fr 320px}
      .hero-left{max-width:100%}
    }
    @media (max-width:820px){
      .products-grid{grid-template-columns:repeat(2,1fr)}
      .hero{grid-template-columns:1fr}
      .hero-right{width:100%}
      .modal-grid{grid-template-columns:1fr}
      .product-modal{max-width:92%}
    }
    @media (max-width:480px){
      header{padding:0 10px}
      .products-grid{grid-template-columns:1fr}
      .hero-card{flex-direction:column;align-items:flex-start}
      .logo{width:40px;height:40px}
      .product-card{padding:10px}
    }
  </style>
</head>
<body>

  <!-- HEADER -->
  <header>
    <div class="brand" aria-hidden="false">
      <div class="logo">HS</div>
      <div>
        <div class="title">HogarSmart</div>
        <div style="font-size:12px;color:var(--muted-text)">Soluciones prácticas para tu hogar</div>
      </div>
    </div>

    <nav class="desktop" aria-hidden="true">
      <!-- kept hidden on mobile; accessible from side panel -->
    </nav>

    <button id="menuBtn" class="hamburger" aria-label="Abrir menú" aria-controls="sidePanel" aria-expanded="false">
      <span class="burger-lines" aria-hidden="true"></span>
    </button>
  </header>

  <!-- SIDE PANEL (BURGER) -->
  <aside id="sidePanel" class="side-panel" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="panel-inner">
      <div class="panel-header">
        <div style="display:flex;gap:12px;align-items:center">
          <div style="font-weight:800;color:#111">HogarSmart</div>
          <div style="color:var(--muted-text)">Menú</div>
        </div>
        <button id="closePanel" class="hamburger" aria-label="Cerrar menú" style="background:transparent;border:none;font-size:20px">✕</button>
      </div>

      <nav class="panel-links" aria-label="Navegación principal">
        <a href="#inicio" data-target="inicio">🏠 Inicio</a>
        <a href="#productos" data-target="productos">🛒 Productos más vendidos</a>
        <a href="#catalogo" data-target="catalogo">📦 Catálogo</a>
        <a href="#comentarios" data-target="comentarios">💬 Comentarios</a>
        <a href="#sobre-nosotros" data-target="sobre-nosotros">🌿 Sobre nosotros</a>
        <a href="#" data-target="contacto">📞 Contacto</a>
        <a href="https://instagram.com" target="_blank" rel="noopener">📸 Instagram</a>
      </nav>

      <div style="margin-top:auto;padding-top:18px;border-top:1px dashed var(--muted-2)">
        <div style="color:var(--muted-text);font-size:0.92rem;margin-bottom:8px">Confianza</div>
        <div style="display:flex;gap:8px;flex-wrap:wrap">
          <div style="background:var(--muted-1);padding:8px;border-radius:10px;font-weight:700">🚚 Envíos fáciles</div>
          <div style="background:var(--muted-1);padding:8px;border-radius:10px;font-weight:700">💵 Pago contraentrega</div>
          <div style="background:var(--muted-1);padding:8px;border-radius:10px;font-weight:700">🔧 Soporte</div>
        </div>
      </div>
    </div>
  </aside>

  <!-- OVERLAY (for modal + side-panel) -->
  <div id="overlay" class="overlay" aria-hidden="true"></div>

  <!-- MAIN -->
  <main id="mainContent">
    <div class="container">

      <!-- INICIO / HERO -->
      <section id="inicio">
        <div class="hero">
          <div class="hero-card" role="region" aria-labelledby="heroTitle">
            <div class="hero-left">
              <h1 id="heroTitle">HogarSmart — Haz tu vida más fácil en casa</h1>
              <p>Descubre soluciones prácticas y automatizadas para las tareas diarias. Productos seleccionados para ahorrar tiempo, simplificar procesos y cuidar tu hogar con estilo profesional.</p>

              <div class="hero-cta">
                <button class="btn btn-primary" onclick="scrollToSection('productos')">🛍️ Ver productos más vendidos</button>
                <button class="btn btn-ghost" onclick="scrollToSection('catalogo')">🔎 Ver catálogo completo</button>
              </div>

              <p style="margin-top:12px;color:var(--muted-text)">En HogarSmart nos enfocamos en practicidad, calidad y diseño. Encuentra gadgets y accesorios que realmente facilitan tu día a día.</p>
            </div>

            <aside class="hero-right" aria-label="Top productos">
              <h3>Top productos 🔥</h3>
              <div class="top-list" id="topProductsList">
                <!-- JS will populate: 3-4 top products clickables -->
              </div>
              <div style="margin-top:12px">
                <button class="btn btn-ghost" onclick="scrollToSection('catalogo')">Ver todos los productos</button>
              </div>
            </aside>
          </div>
        </div>
      </section>

      <!-- PRODUCTOS MÁS VENDIDOS (sección destacada) -->
      <section id="productos">
        <div class="section-head">
          <div>
            <div class="section-title">🛒 Productos más vendidos</div>
            <div class="section-sub">Los favoritos por su practicidad</div>
          </div>
          <div style="color:var(--muted-text)">Actualizado recientemente</div>
        </div>

        <div id="productsFeatured" class="products-grid" aria-live="polite">
          <!-- JS will populate 4 featured -->
        </div>
      </section>

      <!-- CATALOGO (todos los productos) -->
      <section id="catalogo">
        <div class="section-head">
          <div>
            <div class="section-title">📦 Catálogo — Todos los productos</div>
            <div class="section-sub">Explora nuestro catálogo completo. Haz clic en un producto para ver detalles y realizar tu pedido.</div>
          </div>
          <div style="color:var(--muted-text)">Filtros próximamente</div>
        </div>

        <div id="catalogGrid" class="products-grid" aria-live="polite">
          <!-- JS will populate 16 products -->
        </div>
      </section>

      <!-- COMENTARIOS -->
      <section id="comentarios">
        <div class="section-head">
          <div>
            <div class="section-title">💬 Comentarios</div>
            <div class="section-sub">Opiniones reales de clientes — (ejemplos de prueba)</div>
          </div>
        </div>

        <div style="display:grid;gap:12px">
          <div class="review">
            <div class="avatar">MA</div>
            <div>
              <div style="display:flex;align-items:center;gap:10px"><div style="font-weight:700">María A.</div><div style="color:var(--muted-text)"> · Bogotá</div></div>
              <div style="margin-top:6px" class="muted">"El organizador plegable cambió mi cocina — ahora todo cabe y se seca rápido."</div>
              <div style="margin-top:8px;color:#f5c518">★★★★★</div>
            </div>
          </div>

          <div class="review">
            <div class="avatar">JC</div>
            <div>
              <div style="display:flex;align-items:center;gap:10px"><div style="font-weight:700">Juan C.</div><div style="color:var(--muted-text)"> · Medellín</div></div>
              <div style="margin-top:6px" class="muted">"La mini aspiradora es compacta y fuerte. Recomendado para apartamentos."</div>
              <div style="margin-top:8px;color:#f5c518">★★★★☆</div>
            </div>
          </div>
        </div>
      </section>

      <!-- SOBRE NOSOTROS -->
      <section id="sobre-nosotros">
        <div class="section-head">
          <div>
            <div class="section-title">🌿 Sobre HogarSmart</div>
            <div class="section-sub">Nuestra misión: simplificar tu día a día</div>
          </div>
        </div>

        <div style="color:var(--muted-text);max-width:920px">
          <p><strong>HogarSmart</strong> es una empresa dedicada a diseñar y seleccionar soluciones prácticas para el hogar, enfocadas en la eficiencia y la comodidad. Nuestro objetivo es que con herramientas inteligentes y productos bien pensados, las tareas cotidianas consuman menos tiempo y energía, permitiéndote disfrutar más de lo que realmente importa.</p>
          <p style="margin-top:8px">Seleccionamos productos por su utilidad, durabilidad y experiencia de uso. Además, facilitamos la compra con opciones seguras de pago —incluyendo pago contraentrega— y envíos rápidos.</p>
        </div>
      </section>

      <!-- CONTACTO (sección de referencia - pero la interfaz real es la "Contact Page") -->
      <section id="contacto" aria-hidden="true">
        <div class="section-head">
          <div>
            <div class="section-title">📞 Contáctanos</div>
            <div class="section-sub">Estamos para ayudarte</div>
          </div>
        </div>

        <div style="display:flex;gap:18px;flex-wrap:wrap;align-items:center">
          <div style="min-width:240px">
            <div style="font-weight:700">Email</div>
            <div style="color:var(--muted-text)">contacto@hogarsmart.com</div>
            <div style="height:12px"></div>
            <div style="font-weight:700">Instagram</div>
            <div style="color:var(--muted-text)">@hogarsmart_oficial</div>
          </div>

          <div style="min-width:260px">
            <div style="font-weight:700">WhatsApp</div>
            <div style="color:var(--muted-text)">+57 32138231126</div>
            <div style="height:8px"></div>
            <div style="color:var(--muted-text)">Horario: Lun - Vie 9:00 - 18:00</div>
          </div>
        </div>
      </section>

    </div>

    <footer>
      <div class="foot-inner">
        <div style="font-weight:800;color:#111">© 2025 HogarSmart</div>
        <div style="color:var(--muted-text)">Síguenos en <a href="https://instagram.com" target="_blank" rel="noopener">Instagram</a></div>
      </div>
    </footer>
  </main>

  <!-- OVERLAY for modal specifically (works together with overlay) -->
  <div id="overlayModal" class="overlay-modal" aria-hidden="true"></div>

  <!-- PRODUCT MODAL (central window ~70%) -->
  <div id="productModal" class="product-modal" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="pmTitle">
    <button id="closeProductModal" class="hamburger" style="position:absolute;right:14px;top:12px;background:transparent;border:none;font-size:18px;cursor:pointer">✕</button>

    <div class="modal-grid">
      <div class="modal-left">
        <img id="pmImage" src="" alt="Imagen producto">
        <div class="thumbs" id="pmThumbs"></div>
      </div>

      <div class="modal-right">
        <div style="display:flex;justify-content:space-between;align-items:flex-start;gap:12px">
          <div>
            <div id="pmTitle" style="font-size:1.05rem;font-weight:800;color:#111"></div>
            <div id="pmSub" style="color:var(--muted-text);margin-top:6px"></div>
          </div>

          <div style="text-align:right">
            <div id="pmOldPrice" class="old-price" style="display:none"></div>
            <div id="pmPrice" style="font-weight:900;color:#111;font-size:1.05rem"></div>
            <div style="display:flex;align-items:center;justify-content:flex-end;margin-top:8px">
              <div id="pmStars" class="stars-inline">★★★★★</div>
              <div id="pmRatingNum" class="rating-badge"></div>
            </div>
          </div>
        </div>

        <div class="benefits" style="margin-top:10px">
          <strong>Beneficios</strong>
          <ul id="pmBenefits" style="margin:8px 0 0 16px;color:var(--muted-text)"></ul>
        </div>

        <div id="pmPromo" class="promo" style="margin-top:10px;display:none">Promoción especial</div>

        <!-- FORM / ORDER -->
        <div style="margin-top:12px">
          <div style="font-weight:800;margin-bottom:8px">Realizar pedido</div>
          <form id="pmForm" class="mini-form" autocomplete="off">
            <input name="name" type="text" placeholder="Tu nombre" required>
            <input name="phone" type="tel" placeholder="WhatsApp (ej. 3001234567)" required>
            <select name="city" required>
              <option value="">Selecciona ciudad</option>
              <option>Bogotá</option>
              <option>Medellín</option>
              <option>Cali</option>
              <option>Otra</option>
            </select>

            <div class="pay-options" style="margin-top:6px">
              <label><input type="radio" name="payMethod" value="contraentrega" checked style="margin-right:6px">Pago contraentrega</label>
              <label><input type="radio" name="payMethod" value="nequi" style="margin-right:6px">Nequi</label>
              <label><input type="radio" name="payMethod" value="daviplata" style="margin-right:6px">Daviplata</label>
              <label><input type="radio" name="payMethod" value="tarjeta" style="margin-right:6px">Tarjeta</label>
            </div>

            <textarea name="address" rows="2" placeholder="Dirección (si aplica)"></textarea>

            <div style="display:flex;gap:8px;margin-top:8px">
              <button type="submit" class="btn btn-primary">Enviar pedido</button>
              <button type="button" class="btn btn-ghost" id="pmRateBtn">Calificar</button>
            </div>

            <div id="pmMsg" class="pm-msg">Mensaje</div>
          </form>
        </div>

      </div>
    </div>
  </div>

  <!-- RATING POPUP (inline in modal) -->
  <div id="ratingPopup" class="product-modal" style="max-width:520px;display:none;left:50%;transform:translate(-50%,-50%) scale(.98);">
    <div style="text-align:center;font-weight:800;color:#111;margin-bottom:8px">Valora este producto</div>
    <div class="rate-stars" role="radiogroup" aria-label="Puntuación" style="display:flex;gap:8px;justify-content:center;margin-bottom:8px">
      <button class="rate-btn" data-value="1" aria-label="1 estrella" style="font-size:28px;background:transparent;border:none;cursor:pointer">☆</button>
      <button class="rate-btn" data-value="2" aria-label="2 estrellas" style="font-size:28px;background:transparent;border:none;cursor:pointer">☆</button>
      <button class="rate-btn" data-value="3" aria-label="3 estrellas" style="font-size:28px;background:transparent;border:none;cursor:pointer">☆</button>
      <button class="rate-btn" data-value="4" aria-label="4 estrellas" style="font-size:28px;background:transparent;border:none;cursor:pointer">☆</button>
      <button class="rate-btn" data-value="5" aria-label="5 estrellas" style="font-size:28px;background:transparent;border:none;cursor:pointer">☆</button>
    </div>

    <textarea id="ratingComment" rows="4" placeholder="¿Qué te pareció el producto?"></textarea>
    <div style="display:flex;gap:8px;justify-content:center;margin-top:10px">
      <button id="sendRating" class="btn btn-primary">Enviar valoración</button>
      <button id="cancelRating" class="btn btn-ghost">Cancelar</button>
    </div>
  </div>

  <!-- THANK YOU TOAST -->
  <div id="toast" class="toast" role="status" aria-live="polite">¡Gracias por tu valoración!</div>

  <!-- CONTACT PAGE (full-screen interface) -->
  <div id="contactPage" class="contact-page" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="contact-inner">
      <div class="contact-header">
        <div>
          <div style="font-weight:800;font-size:1.2rem">Contacto — HogarSmart</div>
          <div style="color:var(--muted-text)">Estamos listos para ayudarte — escríbenos o visítanos</div>
        </div>
        <div style="display:flex;gap:10px;align-items:center">
          <button id="contactBack" class="contact-back" aria-label="Volver">← Volver</button>
        </div>
      </div>

      <div class="contact-card">
        <div class="contact-left">
          <p style="margin:0 0 12px;color:var(--muted-text)">Completa el formulario o usa los datos de contacto. También puedes ver nuestra ubicación en Bogotá en el mapa a la derecha.</p>

          <form id="contactForm" class="contact-form" autocomplete="off">
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px">
              <input name="name" type="text" placeholder="Tu nombre" required>
              <input name="email" type="email" placeholder="Tu email" required>
            </div>

            <div style="margin-top:8px">
              <input name="subject" type="text" placeholder="Asunto" required>
            </div>

            <div style="margin-top:8px">
              <textarea name="message" rows="6" placeholder="Escribe tu mensaje aquí..." required></textarea>
            </div>

            <div class="contact-actions">
              <button type="submit" class="btn btn-primary">Enviar mensaje</button>
              <button type="button" class="btn btn-ghost" id="contactClose">Cerrar</button>
            </div>

            <div id="contactMsg" style="display:none;margin-top:10px;font-weight:700;color:green"></div>
          </form>

          <div style="margin-top:16px;color:var(--muted-text)">
            <div style="font-weight:700">Email</div>
            <div>contacto@hogarsmart.com</div>
            <div style="height:8px"></div>
            <div style="font-weight:700">WhatsApp</div>
            <div>+57 32138231126</div>
            <div style="height:8px"></div>
            <div style="font-weight:700">Horario</div>
            <div>Lun - Vie 9:00 - 18:00</div>
          </div>
        </div>

        <div>
          <!-- OpenStreetMap embed centered on Bogotá (marker approx at 4.6097, -74.0817) -->
          <div class="map-frame" aria-hidden="false">
            <iframe width="100%" height="100%" frameborder="0" scrolling="no"
              src="https://www.openstreetmap.org/export/embed.html?bbox=-74.0930%2C4.6020%2C-74.0470%2C4.6260&layer=mapnik&marker=4.6140,-74.0700"
              style="border:0"></iframe>
          </div>

          <div style="margin-top:10px;color:var(--muted-text);font-size:0.95rem">
            <div style="font-weight:700">Nuestra ubicación</div>
            <div>Bogotá, Colombia (ubicación de referencia)</div>
          </div>
        </div>
      </div>
    </div>
  </div>

<script>
/* ---------- DATA: 7 Productos reales (orden: ofertas primero) ---------- */
const PRODUCTS = [
  { id:'p1', slug:'maquina-boxeo', title:'Máquina de Boxeo Musical', subtitle:'Entrena reflejos con ritmo y diversión', price:'COP 99.900', priceNum:99900, oldPrice:'COP 125.000', images:[
      'https://d39ru7awumhhs2.cloudfront.net/colombia/products/1833423/1748412859IMG_0186.jpeg'
    ], benefits:['Recargable por USB','Incluye par de guantes','Modo musical interactivo','Fácil instalación en pared'], promo:'¡Oferta limitada!', rating:4.5, reviews:34 },
  { id:'p3', slug:'perchero-doble-organizador', title:'Perchero y Zapatero Doble Organizador', subtitle:'Organiza tu ropa y calzado con estilo y gran capacidad.', price:'COP 59.900', priceNum:59900, oldPrice:'COP 75.000', images:[
      'https://d39ru7awumhhs2.cloudfront.net/colombia/products/1835576/1748621066perchero.png'
    ], benefits:['Ganchos superiores para accesorios','Capacidad hasta 20 pares','Estructura doble resistente','Fácil de armar'], promo:'Descuento especial', rating:4.4, reviews:21 },
  { id:'p5', slug:'cepillo-limpieza-5en1', title:'Cepillo de Limpieza Inalámbrico 5 en 1', subtitle:'Limpieza profunda sin esfuerzo', price:'COP 44.900', priceNum:44900, oldPrice:'COP 59.900', images:[
      'https://d39ru7awumhhs2.cloudfront.net/colombia/products/700560/1710005002Screenshot_1114.jpg'
    ], benefits:['Motor potente para manchas difíciles','Recargable USB y resistente al agua (IPX6)','Incluye 3 cabezales intercambiables','Mango ergonómico'], promo:'Oferta por tiempo limitado', rating:4.6, reviews:80 },
  { id:'p7', slug:'mini-batidora-2en1', title:'Mini Batidora y Picador Eléctrico 2 en 1', subtitle:'Pica, mezcla y cocina más rápido', price:'COP 44.900', priceNum:44900, oldPrice:'COP 60.000', images:[
      'https://d39ru7awumhhs2.cloudfront.net/colombia/products/458969/169819239610000963_10422030_1459030.png'
    ], benefits:['Función 2 en 1: pica y bate','Recargable por USB (1200 mAh)','Tres velocidades ajustables','Compacta y fácil de limpiar'], promo:'Oferta especial', rating:4.3, reviews:204 },
  { id:'p2', slug:'perchero-boutique-zapatero', title:'Perchero de Boutique con Zapatero', subtitle:'Diseño moderno con doble nivel para ropa y calzado.', price:'COP 54.900', priceNum:54900, images:[
      'https://d39ru7awumhhs2.cloudfront.net/colombia/products/734977/1711514172PERCHERO%201.JPG'
    ], benefits:['Estructura de hierro resistente','Fácil de armar','Espacio inferior para zapatos','Acabado brillante tipo boutique'], promo:'', rating:4.2, reviews:101 },
  { id:'p6', slug:'bascula-bluetooth', title:'Báscula Inteligente con Bluetooth', subtitle:'Analiza tu cuerpo y controla tu progreso desde el celular.', price:'COP 34.900', priceNum:34900, images:[
      'https://d39ru7awumhhs2.cloudfront.net/colombia/products/1930136/1758208266BASCULA%20BLUETOOTH%208.jpg'
    ], benefits:['Sincronización con app móvil','Mide peso, grasa, IMC y más','Alta precisión','Multiusuario y diseño en vidrio templado'], promo:'', rating:4.4, reviews:66 },
  { id:'p4', slug:'alfombra-esponjosa', title:'Alfombra Esponjosa Premium', subtitle:'Textura suave, diseño moderno y el confort que tu hogar merece.', price:'COP 39.900', priceNum:39900, images:[
      'https://d39ru7awumhhs2.cloudfront.net/colombia/products/1859067/1750533557Captura%20de%20pantalla%202025-06-21%20135509.jpg'
    ], benefits:['Material premium y duradero','Textura ultra suave','Antideslizante y fácil de limpiar','Ideal para sala o dormitorio'], promo:'', rating:4.3, reviews:44 }
];

/* ---------- Element references ---------- */
const menuBtn = document.getElementById('menuBtn');
const sidePanel = document.getElementById('sidePanel');
const overlay = document.getElementById('overlay');
const closePanel = document.getElementById('closePanel');
const mainContent = document.getElementById('mainContent');

const topProductsList = document.getElementById('topProductsList');
const productsFeatured = document.getElementById('productsFeatured');
const catalogGrid = document.getElementById('catalogGrid');

const productModal = document.getElementById('productModal');
const overlayModal = document.getElementById('overlayModal');
const closeProductModal = document.getElementById('closeProductModal');
const pmImage = document.getElementById('pmImage');
const pmThumbs = document.getElementById('pmThumbs');
const pmTitle = document.getElementById('pmTitle');
const pmSub = document.getElementById('pmSub');
const pmPrice = document.getElementById('pmPrice');
const pmBenefits = document.getElementById('pmBenefits');
const pmPromo = document.getElementById('pmPromo');
const pmStars = document.getElementById('pmStars');
const pmRatingNum = document.getElementById('pmRatingNum');
const pmForm = document.getElementById('pmForm');
const pmMsg = document.getElementById('pmMsg');
const pmRateBtn = document.getElementById('pmRateBtn');

const pmOldPrice = document.getElementById('pmOldPrice');

const ratingPopup = document.getElementById('ratingPopup');
const rateBtns = document.querySelectorAll('.rate-btn');
const sendRatingBtn = document.getElementById('sendRating');
const cancelRatingBtn = document.getElementById('cancelRating');
const ratingComment = document.getElementById('ratingComment');

const toast = document.getElementById('toast');

const contactPage = document.getElementById('contactPage');
const contactBack = document.getElementById('contactBack');
const contactClose = document.getElementById('contactClose');
const contactForm = document.getElementById('contactForm');
const contactMsg = document.getElementById('contactMsg');

let currentProduct = null;

/* ---------- Helpers ---------- */
function renderStars(value){
  const full = Math.floor(value);
  let html = '';
  for(let i=0;i<full;i++) html += '★';
  for(let i=full;i<5;i++) html += '☆';
  return html;
}

/* ---------- Populate top products (3) and featured (4) and catalog (ordered: offers first) ---------- */
function populateListings(){
  // top: first 3 (use first three products)
  const topIds = [0,1,2];
  topProductsList.innerHTML = '';
  topIds.forEach(i=>{
    const p = PRODUCTS[i];
    const div = document.createElement('div');
    div.className = 'top-item';
    div.innerHTML = `<img src="${p.images[0]}" alt=""><div><div style="font-weight:700;color:#111">${p.title}</div><div style="color:var(--muted-text)">${p.price}</div></div>`;
    div.addEventListener('click', ()=> openProductModalByIndex(i));
    topProductsList.appendChild(div);
  });

  // featured (first 4)
  productsFeatured.innerHTML = '';
  for(let i=0;i<4 && i<PRODUCTS.length;i++){
    const p = PRODUCTS[i];
    const card = document.createElement('article');
    card.className = 'product-card';
    card.setAttribute('data-index', i);
    const oldHtml = p.oldPrice ? `<div style="display:flex;align-items:center"><div class="old-price">${p.oldPrice}</div><div class="price">${p.price}</div></div>` : `<div class="price">${p.price}</div>`;
    const badge = p.promo ? `<div class="offer-badge">Oferta</div>` : '';
    card.innerHTML = `
      <div class="product-thumb"><img src="${p.images[0]}" alt="${p.title}"></div>
      <div class="product-meta">
        <h3 class="product-title">${p.title} <span style="font-size:12px;color:var(--muted-text);font-weight:600"> · ${p.subtitle}</span></h3>
        <p class="product-desc">${p.benefits[0]}</p>
      </div>
      <div class="product-row">
        <div style="display:flex;flex-direction:column;gap:6px">
          ${oldHtml}
          ${badge}
        </div>
        <div style="display:flex;gap:8px">
          <button class="btn btn-ghost view-btn" data-index="${i}">Ver</button>
          <button class="btn btn-primary buy-btn" data-index="${i}">Comprar</button>
        </div>
      </div>
    `;
    productsFeatured.appendChild(card);
  }

  // catalog (all products)
  catalogGrid.innerHTML = '';
  PRODUCTS.forEach((p, idx)=>{
    const card = document.createElement('article');
    card.className = 'product-card';
    card.setAttribute('data-index', idx);
    const oldHtml = p.oldPrice ? `<div style="display:flex;flex-direction:column"><div class="old-price">${p.oldPrice}</div><div class="price">${p.price}</div></div>` : `<div class="price">${p.price}</div>`;
    const badge = p.promo ? `<div class="offer-badge">${p.promo ? 'Oferta' : ''}</div>` : '';
    card.innerHTML = `
      <div class="product-thumb"><img src="${p.images[0]}" alt="${p.title}"></div>
      <div class="product-meta">
        <h3 class="product-title">${p.title}</h3>
        <p class="product-desc">${p.subtitle}</p>
      </div>
      <div class="product-row">
        <div style="display:flex;flex-direction:column">
          ${oldHtml}
          <div style="color:var(--muted-text);font-size:12px">${p.rating.toFixed(1)} (${p.reviews})</div>
        </div>
        <div style="display:flex;gap:8px">
          <button class="btn btn-ghost view-btn" data-index="${idx}">Ver</button>
          <button class="btn btn-primary buy-btn" data-index="${idx}">Comprar</button>
        </div>
      </div>
    `;
    catalogGrid.appendChild(card);
  });
}

/* ---------- Open product modal by index ---------- */
function openProductModalByIndex(index){
  const p = PRODUCTS[index];
  if(!p) return;
  currentProduct = index;

  pmImage.src = p.images[0];
  pmThumbs.innerHTML = '';
  p.images.forEach(src=>{
    const im = document.createElement('img');
    im.src = src; im.alt = p.title;
    im.addEventListener('click', ()=> pmImage.src = src);
    pmThumbs.appendChild(im);
  });

  pmTitle.textContent = p.title;
  pmSub.textContent = p.subtitle;
  pmPrice.textContent = p.price;
  pmBenefits.innerHTML = p.benefits.map(b=>`<li>${b}</li>`).join('');
  pmStars.textContent = renderStars(p.rating);
  pmRatingNum.textContent = `${p.rating.toFixed(1)} (${p.reviews})`;

  if(p.oldPrice){
    pmOldPrice.style.display = 'block';
    pmOldPrice.textContent = p.oldPrice;
    pmPromo.style.display = 'block';
    pmPromo.textContent = p.promo || 'Promoción especial';
  } else {
    pmOldPrice.style.display = 'none';
    pmPromo.style.display = 'none';
  }

  // show overlay & modal and blur content
  overlay.classList.add('show');
  overlayModal.classList.add('show');
  productModal.classList.add('show');
  mainContent.classList.add('blurred');

  document.getElementById('pmForm').reset();
  pmMsg.style.display = 'none';
}

/* ---------- Close product modal ---------- */
function closeProductModalFn(){
  productModal.classList.remove('show');
  overlayModal.classList.remove('show');
  overlay.classList.remove('show');
  mainContent.classList.remove('blurred');
  currentProduct = null;
}

/* ---------- Menu (side panel) open/close ---------- */
function openSide(){
  sidePanel.classList.add('show');
  overlay.classList.add('show');
  menuBtn.classList.add('open');
  mainContent.classList.add('blurred');
  menuBtn.setAttribute('aria-expanded','true');
}
function closeSide(){
  sidePanel.classList.remove('show');
  overlay.classList.remove('show');
  menuBtn.classList.remove('open');
  mainContent.classList.remove('blurred');
  menuBtn.setAttribute('aria-expanded','false');
}

/* ---------- Contact page open/close (new interface) ---------- */
function openContactPage(){
  // close side first
  closeSide();
  // show contact page with overlay blur
  contactPage.classList.add('show');
  overlay.classList.add('show');
  mainContent.classList.add('blurred');
  contactPage.setAttribute('aria-hidden','false');
}
function closeContactPage(){
  contactPage.classList.remove('show');
  overlay.classList.remove('show');
  mainContent.classList.remove('blurred');
  contactPage.setAttribute('aria-hidden','true');
}

/* ---------- Wire events ---------- */
menuBtn.addEventListener('click', ()=> {
  if(sidePanel.classList.contains('show')) closeSide();
  else openSide();
});
closePanel.addEventListener('click', closeSide);

// overlay closes modal, side, contact page or rating
overlay.addEventListener('click', ()=>{
  if(sidePanel.classList.contains('show')) closeSide();
  if(productModal.classList.contains('show')) closeProductModalFn();
  if(contactPage.classList.contains('show')) closeContactPage();
  if(ratingPopup.style.display === 'block') closeRatingPopup();
});

// close product modal btn
closeProductModal.addEventListener('click', closeProductModalFn);

/* ---------- Delegate click on view / buy buttons (for featured & catalog) ---------- */
document.addEventListener('click', (e)=>{
  const v = e.target.closest('.view-btn');
  if(v){ const idx = Number(v.dataset.index); openProductModalByIndex(idx); return; }
  const b = e.target.closest('.buy-btn');
  if(b){ const idx = Number(b.dataset.index); openProductModalByIndex(idx); setTimeout(()=> document.querySelector('#pmForm input[name="name"]').focus(),250); return; }
  // card click (open)
  const card = e.target.closest('.product-card');
  if(card && !e.target.closest('button')) {
    const idx = Number(card.getAttribute('data-index'));
    if(!Number.isNaN(idx)) openProductModalByIndex(idx);
  }
});

/* ---------- Form submit (redirect to WhatsApp with prefilled message) ---------- */
pmForm.addEventListener('submit', (e)=>{
  e.preventDefault();
  const fd = new FormData(pmForm);
  if(!fd.get('name') || !fd.get('phone')){
    pmMsg.style.display = 'block';
    pmMsg.style.color = 'crimson';
    pmMsg.textContent = 'Por favor completa los campos obligatorios.';
    return;
  }
  // build message and redirect to WhatsApp (your business number)
  const name = encodeURIComponent(fd.get('name'));
  const phone = encodeURIComponent(fd.get('phone'));
  const city = encodeURIComponent(fd.get('city'));
  const address = encodeURIComponent(fd.get('address') || '');
  const payMethod = encodeURIComponent(fd.get('payMethod') || 'contraentrega');

  const product = PRODUCTS[currentProduct];
  const productName = encodeURIComponent(product ? product.title : 'Pedido HogarSmart');
  const productPrice = encodeURIComponent(product ? product.price : '');

  const msg = encodeURIComponent(`👋 Hola, soy ${decodeURIComponent(name)}. He realizado un pedido en HogarSmart.%0AProducto: ${decodeURIComponent(productName)}%0APrecio: ${decodeURIComponent(productPrice)}%0ACiudad: ${decodeURIComponent(city)}%0ADirección: ${decodeURIComponent(address)}%0AMétodo de pago: ${decodeURIComponent(payMethod)}%0ATeléfono: ${decodeURIComponent(phone)}`);

  const waNumber = '5732138231126'; // tu número con código de país
  const waLink = `https://wa.me/${waNumber}?text=${msg}`;

  // open wa in new tab (or same)
  window.open(waLink,'_blank');

  pmMsg.style.display = 'block';
  pmMsg.style.color = 'green';
  pmMsg.textContent = '✅ Redirigiendo a WhatsApp para confirmar tu pedido...';

  // keep modal open or close after small delay
  setTimeout(()=> {
    closeProductModalFn();
    showToast('Pedido recibido. Te contactaremos por WhatsApp.');
  }, 1200);
});

/* ---------- Rating popup logic ---------- */
function openRatingPopup(){
  if(currentProduct === null){ alert('Abre un producto antes de valorar.'); return; }
  ratingPopup.style.display = 'block';
  overlay.classList.add('show');
  mainContent.classList.add('blurred');
  // reset stars UI
  rateBtns.forEach(b => b.textContent = '☆');
  ratingComment.value = '';
  selectedRating = 5;
  for(let i=0;i<selectedRating;i++) rateBtns[i].textContent='★';
}
function closeRatingPopup(){
  ratingPopup.style.display = 'none';
  overlay.classList.remove('show');
  mainContent.classList.remove('blurred');
}
let selectedRating = 5;
rateBtns.forEach(btn=>{
  btn.addEventListener('click', ()=>{
    selectedRating = Number(btn.dataset.value);
    rateBtns.forEach(b=> b.textContent = (Number(b.dataset.value) <= selectedRating) ? '★':'☆');
  });
});
cancelRatingBtn.addEventListener('click', closeRatingPopup);

sendRatingBtn.addEventListener('click', ()=>{
  if(currentProduct === null) return;
  const prod = PRODUCTS[currentProduct];
  const total = prod.rating * prod.reviews;
  prod.reviews = prod.reviews + 1;
  prod.rating = ((total + selectedRating) / prod.reviews);
  // update UI in modal
  pmStars.textContent = renderStars(prod.rating);
  pmRatingNum.textContent = `${prod.rating.toFixed(1)} (${prod.reviews})`;
  closeRatingPopup();
  showToast('Gracias por tu valoración — tu opinión ayuda mucho.');
});

/* ---------- Open rating from modal button ---------- */
pmRateBtn.addEventListener('click', (e)=>{
  e.preventDefault();
  openRatingPopup();
});

/* ---------- Auto-close sidePanel when clicking any link inside it ---------- */
const panelLinks = document.querySelectorAll('#sidePanel a');
panelLinks.forEach(link=>{
  link.addEventListener('click', (ev)=>{
    const target = link.getAttribute('data-target');
    if(target && target !== 'contacto'){
      ev.preventDefault();
      closeSide();
      setTimeout(()=> scrollToSection(target), 220);
    } else if(target === 'contacto') {
      ev.preventDefault();
      // open contact page (new interface)
      openContactPage();
    } else {
      // external (instagram etc) : just close
      closeSide();
    }
  });
});

/* ---------- Smooth scroll helper ---------- */
function scrollToSection(id){
  const el = document.getElementById(id);
  if(!el) return;
  el.scrollIntoView({behavior:'smooth', block:'start'});
}

/* ---------- Toast helper ---------- */
let toastTimer = null;
function showToast(text){
  toast.textContent = text;
  toast.classList.add('show');
  if(toastTimer) clearTimeout(toastTimer);
  toastTimer = setTimeout(()=> toast.classList.remove('show'), 3000);
}

/* ---------- Init populate and animation + URL param product open ---------- */
document.addEventListener('DOMContentLoaded', ()=>{
  populateListings();

  // animate product cards (small entrance)
  document.querySelectorAll('.product-card').forEach((c,i)=>{
    c.style.opacity = 0;
    c.style.transform = 'translateY(8px)';
    setTimeout(()=>{ c.style.transition = 'opacity .45s ease, transform .45s ease'; c.style.opacity = 1; c.style.transform = 'none'; }, 80 * i);
  });

  // ensure featured and top clickable buttons wired (if dynamic)
  document.querySelectorAll('.view-btn, .buy-btn').forEach(b => b.addEventListener('click', e => e.stopPropagation()));

  // check URL for ?producto=slug or id to auto-open product modal
  const params = new URLSearchParams(window.location.search);
  const prodParam = params.get('producto') || params.get('product') || params.get('p');
  if(prodParam){
    // try find by id or slug
    const idx = PRODUCTS.findIndex(p => p.id === prodParam || p.slug === prodParam);
    if(idx !== -1) {
      // small delay to let layout render then open modal
      setTimeout(()=> openProductModalByIndex(idx), 300);
    }
  }
});

/* ---------- Accessibility: ESC to close modals/panels/pages ---------- */
window.addEventListener('keydown',(e)=>{
  if(e.key === 'Escape'){
    if(ratingPopup.style.display === 'block') closeRatingPopup();
    else if(productModal.classList.contains('show')) closeProductModalFn();
    else if(sidePanel.classList.contains('show')) closeSide();
    else if(contactPage.classList.contains('show')) closeContactPage();
  }
});

/* ---------- Ensure clicking a top featured opens modal (redundant safety) ---------- */
topProductsList.addEventListener('click',(e)=>{
  const card = e.target.closest('.top-item');
  if(card) {
    const idx = Array.from(topProductsList.children).indexOf(card);
    if(idx>=0) openProductModalByIndex(idx);
  }
});

/* ---------- Contact page controls ---------- */
contactBack.addEventListener('click', ()=> closeContactPage());
contactClose.addEventListener('click', ()=> closeContactPage());

contactForm.addEventListener('submit', (e)=>{
  e.preventDefault();
  const fd = new FormData(contactForm);
  if(!fd.get('name') || !fd.get('email') || !fd.get('message')){
    contactMsg.style.display = 'block';
    contactMsg.style.color = 'crimson';
    contactMsg.textContent = 'Por favor completa los campos obligatorios.';
    return;
  }
  // simulate sending
  contactMsg.style.display = 'block';
  contactMsg.style.color = 'green';
  contactMsg.textContent = '✅ Mensaje enviado. Te responderemos pronto.';
  contactForm.reset();

  // after 2s close and show toast
  setTimeout(()=>{
    closeContactPage();
    showToast('Gracias por contactarnos — revisaremos tu mensaje.');
    contactMsg.style.display = 'none';
  }, 1800);
});

</script>

</body>
</html>
<!-- Mensaje inicial arriba de la página -->
<div id="form-notification" style="background-color: #f7f7f7; padding: 10px; text-align: center; font-weight: bold;">
  En cuanto termines el formulario serás redireccionado con uno de nuestros asesores para terminar de confirmar tu pedido.
</div>

<!-- Formulario reforzado -->
<form id="pedidoForm" style="margin-top: 20px; max-width: 500px; margin-left:auto; margin-right:auto;">
  <label>Nombre completo*</label>
  <input type="text" name="nombre" id="nombre" required style="width: 100%; padding: 8px; margin-bottom: 10px;">

  <label>Correo electrónico*</label>
  <input type="email" name="correo" id="correo" required style="width: 100%; padding: 8px; margin-bottom: 10px;">

  <label>Número de teléfono*</label>
  <input type="tel" name="telefono" id="telefono" required pattern="[0-9]{7,15}" placeholder="Ej: 3001234567" style="width: 100%; padding: 8px; margin-bottom: 10px;">

  <label>Dirección completa*</label>
  <input type="text" name="direccion" id="direccion" required style="width: 100%; padding: 8px; margin-bottom: 10px;">

  <label>Comentarios adicionales</label>
  <textarea name="comentarios" id="comentarios" style="width: 100%; padding: 8px; margin-bottom: 10px;"></textarea>

  <button type="submit" style="padding: 10px 20px; font-weight: bold;">Enviar pedido</button>
</form>

<!-- Mensaje de envío -->
<div id="mensajeEnvio" style="display:none; text-align:center; margin-top: 20px; font-weight:bold;">
  En breve serás redireccionado con un asesor para terminar de confirmar tu pedido.
</div>

<script>
document.getElementById('pedidoForm').addEventListener('submit', function(e) {
    e.preventDefault();

    // Validación básica (ya tenemos required en HTML)
    var nombre = document.getElementById('nombre').value.trim();
    var correo = document.getElementById('correo').value.trim();
    var telefono = document.getElementById('telefono').value.trim();
    var direccion = document.getElementById('direccion').value.trim();
    var comentarios = document.getElementById('comentarios').value.trim();

    if(!nombre || !correo || !telefono || !direccion){
        alert("Por favor completa todos los campos obligatorios.");
        return;
    }

    // Enviar datos a tu servidor o correo (ejemplo usando fetch a tu endpoint)
    fetch('https://tuservidor.com/guardar-formulario', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({
            nombre: nombre,
            correo: correo,
            telefono: telefono,
            direccion: direccion,
            comentarios: comentarios
        })
    }).then(function(response){
        // Mostrar mensaje y redireccionar
        document.getElementById('pedidoForm').style.display = 'none';
        document.getElementById('mensajeEnvio').style.display = 'block';

        // Redireccionar a WhatsApp después de 3 segundos
        setTimeout(function(){
            // Cambia el número de WhatsApp por el tuyo
            var numeroWhatsApp = '573001234567';
            var mensaje = encodeURIComponent("Hola, he completado el formulario y quiero confirmar mi pedido.");
            window.location.href = "https://wa.me/" + numeroWhatsApp + "?text=" + mensaje;
        }, 3000);
    }).catch(function(error){
        alert("Ocurrió un error al enviar el formulario. Intenta nuevamente.");
        console.error(error);
    });
});
</script>
